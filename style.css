@layer global, components;

@layer global {

    /* montserrat-500 - latin */
    @font-face {
        font-display: swap;
        font-family: 'Montserrat';
        font-style: normal;
        font-weight: 500;
        src: url('./assets/fonts/montserrat-v31-latin-500.woff2') format('woff2');
    }

    /* montserrat-700 - latin */
    @font-face {
        font-display: swap;
        font-family: 'Montserrat';
        font-style: normal;
        font-weight: 700;
        src: url('./assets/fonts/montserrat-v31-latin-700.woff2') format('woff2');
    }

    /* fraunces-700 - latin */
    @font-face {
        font-display: swap;
        font-family: 'Fraunces';
        font-style: normal;
        font-weight: 700;
        src: url('./assets/fonts/fraunces-v38-latin-700.woff2') format('woff2'),
    }

    :root {
        --clr-green-500: hsl(158, 36%, 37%);
        --clr-green-700: hsl(158, 42%, 18%);
        --clr-black: hsl(212, 21%, 14%);
        --clr-grey: hsl(228, 12%, 48%);
        --clr-cream: hsl(30, 38%, 92%);
        --clr-white: hsl(0, 0%, 100%);

        --ff-base: 'Montserrat', Arial, Helvetica, sans-serif;
        --ff-accent: 'Fraunces', 'Times New Roman', Times, serif;
        --fs-11: calc(11 / 16 * 1rem);
        --fs-13: calc(13 / 16 * 1rem);
        --fs-14: calc(14 / 16 * 1rem);
        --fs-30: calc(30 / 16 * 1rem);
        --fw-500: 500;
        --fw-700: 700;

        --shadow: 0px 1px 10px -2px rgba(66, 68, 90, 0.2);

        --clr-bg: var(--clr-cream);
        --clr-article: var(--clr-white);
        --clr-h1: var(--clr-black);
        --clr-p: var(--clr-grey);
        --clr-price: var(--clr-green-500);
        --clr-price-hover: var(--clr-green-700);
    }

    *,
    *::before,
    *::after {
        margin: 0;
        box-sizing: border-box;
    }

    html {
        -moz-text-size-adjust: none;
        -webkit-text-size-adjust: none;
        text-size-adjust: none;
    }

    body {
        font-family: var(--ff-base);
        font-weight: var(--fw-500);
        background-color: var(--clr-bg);
        min-block-size: 100vh;
        min-block-size: 100dvb;
        display: grid;
        place-items: center;
        -webkit-font-smoothing: antialiased;
    }

    h1 {
        font-family: var(--ff-accent);
        font-weight: var(--fw-700);
        font-size: var(--fs-30);
        color: var(--clr-h1);
        text-wrap: balance;
        line-height: 1;
    }

    p {
        font-weight: var(--fw-500);
        color: var(--clr-p);
        font-size: var(--fs-14);
        line-height: 1.6;
    }

    img,
    figure,
    picture,
    source {
        display: block;
        max-inline-size: 100%;
        block-size: auto;
    }

    button {
        -webkit-appearance: none;
        border-radius: 0;
        text-align: inherit;
        background: none;
        box-shadow: none;
        padding: 0;
        cursor: pointer;
        border: none;
        color: inherit;
        font: inherit;
    }

    .visually-hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

}

@layer components {

    .product {
        display: grid;
        grid-auto-flow: column;
        grid-template-columns: repeat(2, 1fr);
        background-color: var(--clr-article);
        max-inline-size: calc(600 / 16 * 1rem);
        border-radius: .6rem;
        overflow: hidden;

        @media (width <=calc(576 / 16 * 1rem)) {
            grid-auto-flow: row;
            grid-template-columns: 1fr;
            margin: 100px 15px 200px;
        }
    }

    .product__image img {
        border-start-start-radius: .6rem;
        border-end-start-radius: .6rem;
        max-block-size: calc(433.2 / 16 * 1rem);

        @media (width <=calc(576 / 16 * 1rem)) {
            object-fit: cover;
            border-end-start-radius: 0;
        }
    }

    .product__content {
        padding: 2rem;
        display: flex;
        flex-direction: column;
        gap: 1.25rem;

        @media (width >=calc(576 / 16 * 1rem)) {
            max-block-size: calc(433.2 / 16 * 1rem);
        }
    }

    .product__category {
        text-transform: uppercase;
        letter-spacing: .325rem;
        font-size: var(--fs-11);
    }

    .flex-group {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .product__price {
        font-family: var(--ff-accent);
        font-size: var(--fs-30);
        color: var(--clr-price);
    }

    .product__content:has(.button:hover, .button:focus-visible) .product__price {
        animation: shake-rotate 2.6s cubic-bezier(0.5, 0, 0.7, 1) infinite;
        scale: 1.1;
    }

    .product__original-price {
        font-size: var(--fs-13);
        text-decoration: line-through;
        align-self: center;
    }

    .button {
        color: var(--clr-white);
        background-color: var(--clr-price);
        font-size: var(--fs-14);
        display: flex;
        justify-content: center;
        align-items: center;
        gap: .5rem;
        padding: .85rem;
        border-radius: .5rem;
        transition: background-color 0.2s ease;

        &:is(:hover, :focus-visible) {
            background-color: var(--clr-price-hover);
        }
    }

    .button[data-icon="shopping-cart"]::before {
        content: "";
        background-image: url("./assets/images/icon-cart.svg");
        width: 15px;
        height: 15px;
        color: var(--clr-white);
    }

    @keyframes shake-rotate {
        0% {
            transform: rotate(0deg);
            transform-origin: 50% 50%;
        }

        /* Shake happens in first 0.6s (23% of 2.6s total) */
        3.5% {
            transform: rotate(3deg);
        }

        8% {
            transform: rotate(-3deg);
        }

        13% {
            transform: rotate(3deg);
        }

        16% {
            transform: rotate(-3deg);
        }

        20% {
            transform: rotate(3deg);
        }

        23% {
            transform: rotate(0deg);
        }

        /* Pause from 23% to 100% (2 seconds) */
        100% {
            transform: rotate(0deg);
        }
    }

}